<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Grag</title>
<script src="/jslib/jquery-2.1.3.js"></script>
<script src="/jslib/jquery-ui.js"></script>
<link rel="stylesheet" href="/jslib/jquery-ui.css">
<script src="/socket.io/socket.io.js"></script>
<script src="/jslib/jquery.toast.min.js"></script> <!-- source: https://github.com/kamranahmedse/jquery-toast-plugin -->  
<script src="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js"></script> <!-- source: https://github.com/iamdustan/smoothscroll -->
<link rel="stylesheet" href="/jslib/jquery.toast.min.css">
<link rel="stylesheet" href="grag3.css">
<style>


</style>

<script>

var socket = io.connect('/browser')
var clientId = undefined
things = {}

function createThingCb(thing) {
    let container = $('#maindiv')
    let box = '<span class="flex1" id="thing-' + thing.id + '"></span>'
    container.append(box)
    things[thing.id].onChanged = createOnThingChanged(box)
    things[thing.id].onChanged(thing)
}

function createOnThingChanged(box) {
    return (thing, diff) => {
        console.log('Thing ' + thing.id + ' changed', diff)
        $('#thing-' + thing.id)[0].innerHTML = '<span style="width: 50px; height:100px;z-index: 2;position:relative; vertical-align:bottom; color: ' + (thing.value == 'ON' ? '#E02020' : '#202030') + '">' + thing.def.name + '</span>'
    }
}

function onload() {
    socket.emit('things', 'retrieveAll')
    socket.emit('subscribe', 'things')
}

</script>

<script src="smart.js"></script>

</head>
<body onload="onload()">

<h1 id="title"><center><span onclick="location.href='grag.html'">Grag</span> zu <span onclick="location.href='http://10.20.30.5:3000/d/6cCxhw-Gk/test?orgId=1&from=now-24h&to=now&refresh=1m'">Diensten</span></center></h1>

<style>
.flex1 {
	width: 150px;
	height: 150px;
	margin: 10px;
	background-color: #C0C0D0;
	color: #202030;
	text-align: center;
	
}
</style>
<div id="maindiv" style="display: flex;">
<!--
<span class="flex1"><img style="margin-left:10px;width:180px; height:200px;z-index: 1;position:fixed;float:left" src='img-grag/Light.png'></span><span style="width: 100%; height:100%;z-index: 2;position:relative; vertical-align:bottom">Main Light</span></span>
<span class="flex1"><span style="margin-left:10px;width:180px; height:200px;z-index: 1;position:fixed; background-size: 100%; background-image:url('img-grag/Light.png');float:left;background-position: 0 0;"></span><span style="width: 100%; height:100%;z-index: 2;position:relative; vertical-align:bottom">Hoard Light</span></span>
</span></span>
-->
</div>



</body></html>
